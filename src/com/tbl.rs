use super::util::*;
use super::*;

pub(crate) static evey_tbl_mpm: [[[u8; 5]; 6]; 6] = [
    [
        [0, 2, 3, 1, 4],
        [0, 2, 1, 3, 4],
        [0, 2, 1, 3, 4],
        [1, 2, 0, 3, 4],
        [0, 2, 1, 3, 4],
        [0, 1, 2, 3, 4],
    ],
    [
        [1, 0, 2, 3, 4],
        [0, 1, 2, 3, 4],
        [0, 1, 2, 3, 4],
        [1, 2, 0, 3, 4],
        [0, 1, 3, 2, 4],
        [0, 2, 1, 4, 3],
    ],
    [
        [1, 0, 2, 3, 4],
        [1, 0, 2, 3, 4],
        [1, 0, 2, 3, 4],
        [2, 0, 1, 3, 4],
        [1, 0, 3, 2, 4],
        [0, 1, 2, 4, 3],
    ],
    [
        [1, 0, 2, 3, 4],
        [0, 2, 1, 3, 4],
        [1, 0, 2, 3, 4],
        [1, 2, 0, 3, 4],
        [0, 1, 2, 3, 4],
        [0, 2, 1, 4, 3],
    ],
    [
        [0, 1, 2, 3, 4],
        [0, 3, 2, 1, 4],
        [1, 0, 2, 3, 4],
        [1, 2, 0, 3, 4],
        [1, 2, 3, 0, 4],
        [0, 2, 1, 4, 3],
    ],
    [
        [0, 1, 2, 3, 4],
        [0, 1, 2, 4, 3],
        [0, 1, 2, 4, 3],
        [0, 2, 1, 4, 3],
        [0, 1, 2, 3, 4],
        [0, 1, 2, 4, 3],
    ],
];

pub(crate) static evc_tbl_log2: [u8; 257] = [
    /* 0, 1 */
    0, 0, /* 2, 3 */
    1, 1, /* 4 ~ 7 */
    2, 2, 2, 2, /* 8 ~ 15 */
    3, 3, 3, 3, 3, 3, 3, 3, /* 16 ~ 31 */
    4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, /* 31 ~ 63 */
    5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5,
    /* 64 ~ 127 */
    6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,
    6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,
    /* 128 ~ 255 */
    7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
    7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
    7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
    7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
    /* 256 */
    8,
];

// ChromaQP offset for U and V components
pub(crate) static evc_tbl_qp_chroma_dynamic_ext: [[i8; MAX_QP_TABLE_SIZE_EXT]; 2] = [
    [
        -12, -11, -10, -9, -8, -7, -6, -5, -4, -3, -2, -1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    ],
    [
        -12, -11, -10, -9, -8, -7, -6, -5, -4, -3, -2, -1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    ],
];

pub(crate) const EVC_TBL_CHROMA_QP_OFFSET: i8 = 6 * (BIT_DEPTH as i8 - 8);

lazy_static! {
    pub(crate) static ref evc_scan_tbl: [Box<[u16]>; MAX_CU_LOG2 - 1] = {
        let mut scan_tbl: [Box<[u16]>; MAX_CU_LOG2 - 1] = [
            init_scan(2),
            init_scan(4),
            init_scan(8),
            init_scan(16),
            init_scan(32),
            init_scan(64),
        ];
        scan_tbl
    };
}
